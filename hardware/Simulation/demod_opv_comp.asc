Version 4
SHEET 1 3092 880
WIRE -480 -688 -544 -688
WIRE -352 -688 -416 -688
WIRE -544 -592 -544 -688
WIRE -480 -592 -544 -592
WIRE -352 -592 -352 -688
WIRE -352 -592 -416 -592
WIRE -1248 -480 -1312 -480
WIRE -1120 -480 -1184 -480
WIRE -544 -464 -544 -592
WIRE -480 -464 -544 -464
WIRE -352 -464 -352 -592
WIRE -352 -464 -416 -464
WIRE -1312 -384 -1312 -480
WIRE -1264 -384 -1312 -384
WIRE -1120 -384 -1120 -480
WIRE -1120 -384 -1184 -384
WIRE -544 -368 -544 -464
WIRE -496 -368 -544 -368
WIRE -352 -368 -352 -464
WIRE -352 -368 -416 -368
WIRE -1232 -224 -1232 -256
WIRE -1696 -208 -1808 -208
WIRE -1536 -208 -1600 -208
WIRE -1440 -208 -1472 -208
WIRE -1312 -208 -1312 -384
WIRE -1312 -208 -1360 -208
WIRE -1264 -208 -1312 -208
WIRE -464 -208 -464 -240
WIRE -1120 -192 -1120 -384
WIRE -1120 -192 -1200 -192
WIRE -1072 -192 -1120 -192
WIRE -784 -192 -848 -192
WIRE -672 -192 -720 -192
WIRE -544 -192 -544 -368
WIRE -544 -192 -592 -192
WIRE -496 -192 -544 -192
WIRE -1264 -176 -1296 -176
WIRE -352 -176 -352 -368
WIRE -352 -176 -432 -176
WIRE -288 -176 -352 -176
WIRE -496 -160 -528 -160
WIRE -1232 -128 -1232 -160
WIRE -1648 -112 -1648 -144
WIRE -464 -112 -464 -144
WIRE -1648 0 -1648 -32
WIRE -752 32 -752 -32
WIRE -624 32 -752 32
WIRE -624 64 -624 32
WIRE -752 144 -752 32
WIRE -784 176 -848 176
WIRE -624 192 -624 144
WIRE -624 192 -704 192
WIRE -560 192 -624 192
WIRE -784 208 -848 208
WIRE -768 272 -768 240
WIRE -752 272 -752 240
WIRE -752 272 -768 272
WIRE -992 304 -1056 304
WIRE -848 304 -848 208
WIRE -848 304 -912 304
WIRE -784 304 -848 304
WIRE -624 304 -624 192
WIRE -624 304 -704 304
WIRE -2480 384 -2480 304
WIRE -2320 384 -2320 304
WIRE -2160 384 -2160 304
WIRE -2000 384 -2000 304
WIRE -1840 384 -1840 304
WIRE -1696 384 -1696 304
WIRE -1424 384 -1424 304
WIRE -752 448 -752 272
WIRE -2480 528 -2480 464
WIRE -2320 528 -2320 464
WIRE -2160 528 -2160 464
WIRE -2000 528 -2000 464
WIRE -1840 528 -1840 464
WIRE -1696 528 -1696 464
WIRE -1424 528 -1424 464
FLAG -2480 528 0
FLAG -2480 304 Supply
FLAG -1840 528 0
FLAG -1840 304 CmdInv
FLAG -1072 -192 Amp1
FLAG -1696 304 Signal
FLAG -1696 528 0
FLAG -2320 528 0
FLAG -2320 304 PulseReader
FLAG -2160 528 0
FLAG -2160 304 PulseTag
FLAG -2000 528 0
FLAG -2000 304 Pulse
FLAG -1232 -128 0
FLAG -1232 -256 Supply
FLAG -1296 -176 CM
FLAG -288 -176 Amp2
FLAG -464 -112 0
FLAG -464 -240 Supply
FLAG -528 -160 CM
FLAG -1808 -208 Signal
FLAG -848 -192 Amp1
FLAG -1648 0 CmdInv
FLAG -1424 528 0
FLAG -1424 304 CM
FLAG -752 -32 Supply
FLAG -848 176 CM
FLAG -1056 304 Amp2
FLAG -752 448 0
FLAG -560 192 Comp
SYMBOL voltage -2480 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -1840 368 R0
WINDOW 3 24 96 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 70 -90 VRight 2
SYMATTR Value PULSE(5 0 {Pad-150n} 100n 100n {NReader*PReader-PReader/2+100n})
SYMATTR InstName V3
SYMBOL bv -1696 368 R0
WINDOW 3 84 -226 VRight 2
SYMATTR Value V=V(Pulse)+0.005*white(10e6*time)
SYMATTR InstName B1
SYMBOL voltage -2320 368 R0
WINDOW 3 89 -171 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(1 5m {Pad} 10n 10n {PReader/2} {PReader} {NReader})
SYMATTR InstName V4
SYMBOL voltage -2160 368 R0
WINDOW 3 89 -171 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 5m {Pad+NReader*PReader-PReader/2+Sep} 10n 10n {(1/FTag)/2} {1/FTag} {NTag})
SYMATTR InstName V5
SYMBOL bv -2000 368 R0
WINDOW 3 81 -166 Invisible 2
SYMATTR Value V=V(PulseReader)+V(PulseTag)
SYMATTR InstName B2
SYMBOL res -1344 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap -1472 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res -1168 -400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 27k
SYMBOL res -576 -208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -400 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 27k
SYMBOL cap -416 -480 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 100p
SYMBOL cap -784 -176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C7
SYMATTR Value 3.3n
SYMBOL Opamps/opamp2 -1232 -256 R0
SYMATTR InstName U3
SYMATTR Value ba4580r_sub
SYMBOL Opamps/opamp2 -464 -240 R0
SYMATTR InstName U2
SYMATTR Value ba4580r_sub
SYMBOL cap -1184 -496 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100p
SYMBOL res -1632 -128 M0
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL npn -1600 -144 M270
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL diode -416 -608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 42 30 VTop 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMATTR Description Light Emitting Diode
SYMATTR Type led
SYMBOL diode -480 -672 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMATTR Description Light Emitting Diode
SYMATTR Type led
SYMBOL voltage -1424 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3
SYMBOL Comparators\\RH111 -752 192 R0
SYMATTR InstName U1
SYMBOL res -896 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -688 288 R90
WINDOW 0 85 49 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res -640 48 R0
SYMATTR InstName R7
SYMATTR Value 1k
TEXT -2480 96 Left 2 !.tran {Pad+NReader*PReader+Sep+NTag/FTag+Pad}
TEXT -2480 48 Left 2 !.param Pad=100u Sep=30u PReader=20u FTag=50k NReader=5 NTag=10
TEXT -2480 144 Left 2 !.include models/BA4580R_Rev002.lib
